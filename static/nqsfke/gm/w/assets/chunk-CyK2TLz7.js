import{D as t}from"./chunk-rMGfDec6.js";import{H as e}from"./chunk-BJDOL0vG.js";import{C as o,j as i}from"./ht-DIEl3wcJ.js";import{a as r}from"./chunk-CMQyd8eO.js";class a{static initPlayer(i,r){let s;const n={theme:"#f21c11",loop:!1,lang:"zh-cn",screenshot:!1,hotkey:!0,preload:"auto",volume:.7,mutex:!0,container:document.getElementById(i),autoplay:!1,video:{url:r,type:"hls"}};s=new t(n);const l=s.video;try{const t=!!window.MediaSource;if(e.isSupported()&&t||o.isQQBrowser()||o.isSogouBrowser()){const t=new e({maxBufferLength:60,maxMaxRetry:5,maxRetry:3,retryDelay:1e3,maxRetryDelay:5e3,backoff:"exponential"});t.loadSource(r),t.attachMedia(l)}else l.canPlayType("application/vnd.apple.mpegurl")&&(l.src=r);a.updateVideoControls(l)}catch(d){l.canPlayType("application/vnd.apple.mpegurl")&&(l.src=r,a.updateVideoControls(l))}return s}static updateVideoControls(t){a.setVideoAttrs(t),a.hideVideoControls(".dplayer-notice-list"),a.hideVideoControls(".dplayer-comment"),a.hideVideoControls(".dplayer-setting-danunlimit"),a.hideVideoControls(".dplayer-setting-showdan"),a.hideVideoControls(".dplayer-setting-danmaku")}static setVideoAttrs(t){t.muted=!0,t.setAttribute("raw-controls",""),t.setAttribute("preload",""),t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),t.setAttribute("x5-playsinline",""),t.setAttribute("x5-video-player-fullscreen",""),t.setAttribute("x5-video-player-type","h5-page"),t.setAttribute("x5-video-player-orientation","portrait"),t.setAttribute("t7-video-player-type","inline"),t.setAttribute("disablepictureinpicture",""),t.setAttribute("controlslist","nodownload"),t.setAttribute("x-webkit-airplay","allow"),t.setAttribute("preload","metadata"),t.setAttribute("controls360","no")}static hideVideoControls(t){let e=document.querySelector(t);e&&(e.style.display="none")}static showVideoControls(t){let e=document.querySelector(t);e&&(e.style.display="block")}}async function s(t){try{const e=i(),o="".concat(e,"/playErr?").concat(new URLSearchParams(t).toString());await r.post(o,{})}catch(e){}}export{a as D,s as r};
