import{V as t}from"./chunk-Xpcu2h2O.js";import{A as e,B as n,w as r,n as o,C as i,D as c,E as u,F as a,r as f,b as s,o as l}from"./chunk-DPRUGDB1.js";
/*!
 * v-viewer v3.0.11
 * https://github.com/mirari/v-viewer#readme
 *
 * Copyright 2022 mirari
 * Released under the MIT license
 *
 * Date: 2022-10-25T08:49:33.301Z
 */var p,b,y,d,v,w,g,j,h,m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},O=function(t){return t},_=Math.max,A="object"==typeof m&&m&&m.Object===Object&&m,x=A,T="object"==typeof self&&self&&self.Object===Object&&self,E=x||T||Function("return this")(),$=E.Symbol,I=$,S=Object.prototype,M=S.hasOwnProperty,P=S.toString,D=I?I.toStringTag:void 0,F=Object.prototype.toString,U=function(t){var e=M.call(t,D),n=t[D];try{t[D]=void 0;var r=!0}catch(i){}var o=P.call(t);return r&&(e?t[D]=n:delete t[D]),o},k=$?$.toStringTag:void 0,C=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":k&&k in Object(t)?U(t):function(t){return F.call(t)}(t)},V=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},B=C,N=V,R=function(t){if(!N(t))return!1;var e=B(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},W=E["__core-js_shared__"],L=(p=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+p:"",q=Function.prototype.toString,z=R,G=function(t){return!!L&&L in t},H=V,K=/^\[object .+?Constructor\]$/,J=Function.prototype,Q=Object.prototype,X=J.toString,Y=Q.hasOwnProperty,Z=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=function(t){return!(!H(t)||G(t))&&(z(t)?Z:K).test(function(t){if(null!=t){try{return q.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t))},et=function(){try{var t=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return tt(n)?n:void 0}(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),nt=function(t){return function(){return t}},rt=et,ot=rt?function(t,e){return rt(t,"toString",{configurable:!0,enumerable:!1,value:nt(e),writable:!0})}:O,it=Date.now,ct=function(t){var e=0,n=0;return function(){var r=it(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(ot),ut=O,at=function(t,e,n){return e=_(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=_(r.length-e,0),c=Array(i);++o<i;)c[o]=r[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=r[o];return u[e]=n(c),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,u)}},ft=ct,st=function(t,e){return t===e||t!=t&&e!=e},lt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},pt=R,bt=lt,yt=function(t){return null!=t&&bt(t.length)&&!pt(t)},dt=/^(?:0|[1-9]\d*)$/,vt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&dt.test(t))&&t>-1&&t%1==0&&t<e},wt=st,gt=yt,jt=vt,ht=V,mt=function(t){return null!=t&&"object"==typeof t},Ot=C,_t=mt,At=function(t){return _t(t)&&"[object Arguments]"==Ot(t)},xt=mt,Tt=Object.prototype,Et=Tt.hasOwnProperty,$t=Tt.propertyIsEnumerable,It=At(function(){return arguments}())?At:function(t){return xt(t)&&Et.call(t,"callee")&&!$t.call(t,"callee")},St=Array.isArray,Mt={exports:{}};b=Mt,d=E,v=function(){return!1},h=((j=(g=(w=(y=Mt.exports)&&!y.nodeType&&y)&&b&&!b.nodeType&&b)&&g.exports===w?d.Buffer:void 0)?j.isBuffer:void 0)||v,b.exports=h;var Pt=C,Dt=lt,Ft=mt,Ut={};Ut["[object Float32Array]"]=Ut["[object Float64Array]"]=Ut["[object Int8Array]"]=Ut["[object Int16Array]"]=Ut["[object Int32Array]"]=Ut["[object Uint8Array]"]=Ut["[object Uint8ClampedArray]"]=Ut["[object Uint16Array]"]=Ut["[object Uint32Array]"]=!0,Ut["[object Arguments]"]=Ut["[object Array]"]=Ut["[object ArrayBuffer]"]=Ut["[object Boolean]"]=Ut["[object DataView]"]=Ut["[object Date]"]=Ut["[object Error]"]=Ut["[object Function]"]=Ut["[object Map]"]=Ut["[object Number]"]=Ut["[object Object]"]=Ut["[object RegExp]"]=Ut["[object Set]"]=Ut["[object String]"]=Ut["[object WeakMap]"]=!1;var kt,Ct,Vt,Bt,Nt,Rt,Wt,Lt={exports:{}};kt=Lt,Vt=A,Bt=(Ct=Lt.exports)&&!Ct.nodeType&&Ct,Nt=Bt&&kt&&!kt.nodeType&&kt,Rt=Nt&&Nt.exports===Bt&&Vt.process,Wt=function(){try{return Nt&&Nt.require&&Nt.require("util").types||Rt&&Rt.binding&&Rt.binding("util")}catch(t){}}(),kt.exports=Wt;var qt=function(t){return Ft(t)&&Dt(t.length)&&!!Ut[Pt(t)]},zt=function(t){return function(e){return t(e)}},Gt=Lt.exports,Ht=Gt&&Gt.isTypedArray,Kt=Ht?zt(Ht):qt,Jt=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Qt=It,Xt=St,Yt=Mt.exports,Zt=vt,te=Kt,ee=Object.prototype.hasOwnProperty,ne=Object.prototype,re=V,oe=Object.prototype.hasOwnProperty,ie=function(t,e){var n=Xt(t),r=!n&&Qt(t),o=!n&&!r&&Yt(t),i=!n&&!r&&!o&&te(t),c=n||r||o||i,u=c?Jt(t.length,String):[],a=u.length;for(var f in t)!e&&!ee.call(t,f)||c&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Zt(f,a))||u.push(f);return u},ce=function(t){if(!re(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ne)}(t),n=[];for(var r in t)("constructor"!=r||!e&&oe.call(t,r))&&n.push(r);return n},ue=yt,ae=function(t,e){return ft(at(t,e,ut),t+"")},fe=st,se=function(t,e,n){if(!ht(n))return!1;var r=typeof e;return!!("number"==r?gt(n)&&jt(e,n.length):"string"==r&&e in n)&&wt(n[e],t)},le=function(t){return ue(t)?ie(t,!0):ce(t)},pe=Object.prototype,be=pe.hasOwnProperty,ye=ae(function(t,e){t=Object(t);var n=-1,r=e.length,o=r>2?e[2]:void 0;for(o&&se(e[0],e[1],o)&&(r=1);++n<r;)for(var i=e[n],c=le(i),u=-1,a=c.length;++u<a;){var f=c[u],s=t[f];(void 0===s||fe(s,pe[f])&&!be.call(t,f))&&(t[f]=i[f])}return t});const de="undefined"!=typeof window&&null!==window;!function(){if(de&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}})}();const ve=Object.prototype.propertyIsEnumerable,we=Object.getOwnPropertySymbols;function ge(t){return"function"==typeof t||"[object Object]"===toString.call(t)}function je(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t}function he(t,...e){if(!ge(t))throw new TypeError("expected the first argument to be an object");if(0===e.length||"function"!=typeof Symbol||"function"!=typeof we)return t;for(const n of e){const e=we(n);for(const r of e)ve.call(n,r)&&(t[r]=n[r])}return t}function me(t,...e){let n=0;var r;for(("object"==typeof(r=t)?null===r:"function"!=typeof r)&&(t=e[n++]),t||(t={});n<e.length;n++)if(ge(e[n])){for(const r of Object.keys(e[n]))je(r)&&(ge(t[r])&&ge(e[n][r])?me(t[r],e[n][r]):t[r]=e[n][r]);he(t,e[n])}return t}const Oe=({images:r=[],options:o})=>{o=me(o,{inline:!1});const i=document.createElement("div"),c=e("div",{style:{display:"none"},class:["__viewer-token"]},r.map(t=>e("img","string"==typeof t?{src:t}:t)));n(c,i);const u=i.firstElementChild;document.body.appendChild(u);const a=new t(u,o),f=a.destroy.bind(a);return a.destroy=function(){return f(),n(null,i),a},a.show(),u.addEventListener("hidden",function(){this.viewer===a&&a.destroy()}),a};var _e=E,Ae=/\s/,xe=/^\s+/,Te=C,Ee=mt,$e=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Ae.test(t.charAt(e)););return e}(t)+1).replace(xe,""):t},Ie=V,Se=/^[-+]0x[0-9a-f]+$/i,Me=/^0b[01]+$/i,Pe=/^0o[0-7]+$/i,De=parseInt,Fe=V,Ue=function(){return _e.Date.now()},ke=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||Ee(t)&&"[object Symbol]"==Te(t)}(t))return NaN;if(Ie(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ie(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$e(t);var n=Me.test(t);return n||Pe.test(t)?De(t.slice(2),n?2:8):Se.test(t)?NaN:+t},Ce=Math.max,Ve=Math.min;const Be=({name:e="viewer",debug:n=!1}={})=>{async function i(n,r,i=!1,u=!1){await o(),u&&!function(t){const e=t.innerHTML.match(/<img([\w\W]+?)[\\/]?>/g),n=e?e.join(""):void 0;return t.__viewerImageDiffCache!==n&&(t.__viewerImageDiffCache=n,!0)}(n)||(i||!n["$".concat(e)]?(c(n),n["$".concat(e)]=new t(n,r)):n["$".concat(e)].update())}function c(t){t["$".concat(e)]&&(t["$".concat(e)].destroy(),delete t["$".concat(e)])}function u(t){t.__viewerMutationObserver&&(t.__viewerMutationObserver.disconnect(),delete t.__viewerMutationObserver)}return{mounted(t,e,n){const o=function(t,e,n){var r,o,i,c,u,a,f=0,s=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var n=r,i=o;return r=o=void 0,f=e,c=t.apply(i,n)}function y(t){var n=t-a;return void 0===a||n>=e||n<0||l&&t-f>=i}function d(){var t,n,r=Ue();if(y(r))return v(r);u=setTimeout(d,(n=e-((t=r)-a),l?Ve(n,i-(t-f)):n))}function v(t){return u=void 0,p&&r?b(t):(r=o=void 0,c)}function w(){var t,n=Ue(),i=y(n);if(r=arguments,o=this,a=n,i){if(void 0===u)return f=t=a,u=setTimeout(d,e),s?b(t):c;if(l)return clearTimeout(u),u=setTimeout(d,e),b(a)}return void 0===u&&(u=setTimeout(d,e)),c}return e=ke(e)||0,Fe(n)&&(s=!!n.leading,i=(l="maxWait"in n)?Ce(ke(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),w.cancel=function(){void 0!==u&&clearTimeout(u),f=0,r=a=o=u=void 0},w.flush=function(){return void 0===u?c:v(Ue())},w}(i,50);var c,a,f;o(t,e.value),a=e,f=o,(c=t).__viewerUnwatch=r(()=>a.value,(t,e)=>{a.value,f(c,t,!0,!1)},{deep:!0}),a.value,e.modifiers.static||function(t,e,n,r){u(t);const o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!o)return;const i=new o(o=>{o.forEach(o=>{o.type,n(t,e,r,!0)})});i.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__viewerMutationObserver=i}(t,e.value,o,e.modifiers.rebuild)},unmounted(t){var e;u(t),(e=t).__viewerUnwatch&&(e.__viewerUnwatch(),delete e.__viewerUnwatch),c(t)}}};const Ne=i({name:"Viewer",props:{images:{type:Array,default:()=>[]},rebuild:{type:Boolean,default:!1},trigger:{type:Object,default:null},options:{type:Object,default:()=>null}},emits:["inited"],setup(e,{emit:n}){let i;const c=f();function u(){i=new t(c.value,e.options),n("inited",i)}function a(){i&&i.destroy()}function p(){a(),u()}function b(){i?(i.update(),n("inited",i)):u()}function y(){e.rebuild?p():b()}const d={deep:!0};return r(()=>e.images,()=>o(()=>y()),d),r(()=>e.trigger,()=>o(()=>y()),d),r(()=>e.options,()=>o(()=>p()),d),s(()=>u()),l(()=>a()),{root:c,createViewer:u,rebuildViewer:p,updateViewer:b,destroyViewer:a}}}),Re={ref:"root"};var We=((t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n})(Ne,[["render",function(t,e,n,r,o,i){return u(),c("div",Re,[a(t.$slots,"default",{images:t.images,options:t.options})],512)}]]),Le={install(e,{name:n="viewer",debug:r=!1,defaultOptions:o}={}){o&&t.setDefaults(o),e.config.globalProperties["$".concat(n,"Api")]=Oe,e.component(n,ye(We,{name:n})),e.directive(n,Be({name:n,debug:r}))},setDefaults(e){t.setDefaults(e)}};export{Le as i};
